<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Jam Kontras Tinggi ✨</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root {
            --bg-dark: #000000;
            --accent: #facc15; 
            --secondary: #ffffff;
            --clock-size: min(75vw, 60vh);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            background-color: var(--bg-dark);
            color: var(--secondary);
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
            height: 100vh;
            width: 100vw;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .app-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 2rem;
            z-index: 10;
            width: 100%;
            height: 100%;
            padding: 1.5rem;
        }

        /* Analog Clock Style */
        .analog-clock {
            width: var(--clock-size);
            height: var(--clock-size);
            border: 6px solid rgba(255, 255, 255, 0.15);
            border-radius: 50%;
            position: relative;
            background: #050505;
            flex-shrink: 0;
        }

        .dot {
            width: 4%; height: 4%;
            background: var(--accent);
            border-radius: 50%;
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            z-index: 30;
            box-shadow: 0 0 15px var(--accent);
        }

        .hand {
            position: absolute;
            bottom: 50%; left: 50%;
            transform-origin: bottom;
            border-radius: 50px;
        }

        .hour-hand { 
            width: 3.5%; height: 26%; 
            background: var(--accent); 
            margin-left: -1.75%; 
            z-index: 15;
        }
        .min-hand { 
            width: 2.5%; height: 38%; 
            background: var(--secondary); 
            margin-left: -1.25%; 
            z-index: 14; 
        }
        .sec-hand { 
            width: 1%; height: 44%; 
            background: #ef4444; 
            margin-left: -0.5%; 
            z-index: 16; 
        }

        .number {
            position: absolute;
            width: 100%; height: 100%;
            text-align: center;
            font-weight: 800;
            font-size: calc(var(--clock-size) * 0.08);
            padding: 4%;
            color: var(--secondary);
        }

        /* Digital Clock - BIGGER & WITH SECONDS */
        .overlay-info {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1.2rem;
            width: 100%;
        }

        #digitalClock {
            font-size: min(20vw, 6.5rem);
            font-weight: 900;
            letter-spacing: -4px;
            color: var(--accent);
            line-height: 1;
            font-variant-numeric: tabular-nums;
            text-shadow: 0 0 30px rgba(250, 204, 21, 0.3);
            display: flex;
            align-items: baseline;
        }

        #digitalSeconds {
            font-size: 0.45em;
            margin-left: 8px;
            opacity: 0.8;
            letter-spacing: -1px;
        }

        .glass-pill {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 50px;
            padding: 0.6rem 1.5rem;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        #gemini-modal {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.95);
            backdrop-filter: blur(20px);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .fs-btn {
            position: fixed;
            top: 1.2rem;
            right: 1.2rem;
            z-index: 100;
            background: rgba(255, 255, 255, 0.15);
            padding: 0.8rem;
            border-radius: 12px;
            cursor: pointer;
        }

        @media (orientation: landscape) {
            .app-container {
                flex-direction: row;
                gap: 6vw;
            }
            .overlay-info {
                align-items: flex-start;
                width: auto;
            }
            :root {
                --clock-size: min(48vw, 80vh);
            }
            #digitalClock {
                font-size: min(12vw, 8rem);
            }
        }
    </style>
</head>
<body onclick="activateWake()">

    <button class="fs-btn" onclick="toggleFullscreen()">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"></path></svg>
    </button>

    <div class="app-container">
        <!-- Analog Clock -->
        <div class="analog-clock" id="clock">
            <div class="dot"></div>
            <div class="hand hour-hand" id="h-hand"></div>
            <div class="hand min-hand" id="m-hand"></div>
            <div class="hand sec-hand" id="s-hand"></div>
        </div>

        <!-- Big Digital Info -->
        <div class="overlay-info">
            <div id="digitalClock">
                <span id="digitalHMS">00:00</span>
                <span id="digitalSeconds">00</span>
            </div>
            
            <div class="glass-pill">
                <span id="temp" class="font-black text-2xl text-yellow-400">--°C</span>
                <div class="w-[1px] h-6 bg-white/20"></div>
                <div class="flex flex-col">
                    <span id="weatherDesc" class="text-xs font-bold uppercase">Memuat...</span>
                    <span id="city" class="text-[10px] opacity-70">--</span>
                </div>
            </div>

            <div class="flex gap-4">
                <button onclick="askGemini('activity')" class="px-8 py-3 rounded-2xl bg-yellow-400 text-black text-xs font-black uppercase tracking-widest">
                    ✨ Saran AI
                </button>
                <button onclick="askGemini('quote')" class="px-8 py-3 rounded-2xl bg-white text-black text-xs font-black uppercase tracking-widest">
                    ✨ Motivasi
                </button>
            </div>
        </div>
    </div>

    <!-- Gemini Modal -->
    <div id="gemini-modal" onclick="closeModal()">
        <div class="bg-zinc-900 border-2 border-yellow-400 p-8 rounded-3xl max-w-sm w-full" onclick="event.stopPropagation()">
            <div class="text-yellow-400 text-[10px] font-black uppercase tracking-[0.2em] mb-4">Gemini Insight</div>
            <div id="modal-content" class="text-xl leading-snug text-white font-medium italic">...</div>
            <button onclick="closeModal()" class="mt-8 w-full py-4 bg-yellow-400 text-black rounded-xl text-sm font-black uppercase">Tutup</button>
        </div>
    </div>

    <script>
        const apiKey = "";
        let wakeLock = null;
        let weatherData = { temp: "", desc: "", city: "" };

        function initNumbers() {
            const clock = document.getElementById('clock');
            for (let i = 1; i <= 12; i++) {
                const num = document.createElement('div');
                num.className = 'number';
                num.style.transform = `rotate(${i * 30}deg)`;
                num.innerHTML = `<div style="transform: rotate(-${i * 30}deg)">${i}</div>`;
                clock.appendChild(num);
            }
        }

        async function activateWake() {
            if ('wakeLock' in navigator) {
                try { wakeLock = await navigator.wakeLock.request('screen'); } catch (e) {}
            }
        }

        function toggleFullscreen() {
            if (!document.fullscreenElement) document.documentElement.requestFullscreen();
            else document.exitFullscreen();
        }

        function update() {
            const now = new Date();
            const h = now.getHours();
            const m = now.getMinutes();
            const s = now.getSeconds();
            
            // Update Digital Clock with Seconds
            document.getElementById('digitalHMS').textContent = 
                `${String(h).padStart(2, '0')}:${String(m).padStart(2, '0')}`;
            document.getElementById('digitalSeconds').textContent = 
                String(s).padStart(2, '0');
            
            // Update Analog Hands
            const sDeg = (s / 60) * 360;
            const mDeg = ((m / 60) * 360) + ((s / 60) * 6);
            const hDeg = ((h % 12 / 12) * 360) + ((m / 60) * 30);

            document.getElementById('s-hand').style.transform = `rotate(${sDeg}deg)`;
            document.getElementById('m-hand').style.transform = `rotate(${mDeg}deg)`;
            document.getElementById('h-hand').style.transform = `rotate(${hDeg}deg)`;
        }

        async function fetchWeather() {
            const getCoords = () => new Promise((resolve, reject) => {
                navigator.geolocation.getCurrentPosition(resolve, reject, { timeout: 5000 });
            });

            try {
                let lat, lon, city = "Lokasi";
                try {
                    const pos = await getCoords();
                    lat = pos.coords.latitude;
                    lon = pos.coords.longitude;
                    const revRes = await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lon}`);
                    const revData = await revRes.json();
                    city = revData.address.city || revData.address.town || "Sekitar Anda";
                } catch (geoError) {
                    const lRes = await fetch('https://ipapi.co/json/');
                    const lData = await lRes.json();
                    lat = lData.latitude; lon = lData.longitude; city = lData.city;
                }

                document.getElementById('city').textContent = city;
                weatherData.city = city;

                const wRes = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true`);
                const wData = await wRes.json();
                
                weatherData.temp = Math.round(wData.current_weather.temperature);
                document.getElementById('temp').textContent = `${weatherData.temp}°C`;
                
                const labels = { 0: "Cerah", 1: "Cerah", 2: "Berawan", 3: "Mendung", 61: "Hujan", 95: "Badai" };
                weatherData.desc = labels[wData.current_weather.weathercode] || "Berawan";
                document.getElementById('weatherDesc').textContent = weatherData.desc;
            } catch (e) {}
        }

        async function askGemini(type) {
            const modal = document.getElementById('gemini-modal');
            const content = document.getElementById('modal-content');
            modal.style.display = 'flex';
            content.innerHTML = 'Menganalisis waktu...';

            const prompt = type === 'activity' 
                ? `Waktu: ${new Date().toLocaleTimeString()}, Cuaca: ${weatherData.desc}, Suhu: ${weatherData.temp}C. Berikan 1 saran kegiatan singkat (Bahasa Indonesia) dengan emoji.`
                : `Berikan 1 kutipan motivasi pendek Bahasa Indonesia untuk menyemangati hari.`;

            try {
                const res = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] })
                });
                const data = await res.json();
                content.innerHTML = data.candidates[0].content.parts[0].text;
            } catch (err) {
                content.innerHTML = "Gagal memproses.";
            }
        }

        function closeModal() { document.getElementById('gemini-modal').style.display = 'none'; }

        initNumbers();
        setInterval(update, 1000);
        update();
        fetchWeather();
        setInterval(fetchWeather, 900000);
    </script>
</body>
</html>
